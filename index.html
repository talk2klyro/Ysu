<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Balloon Sky - Shared Sky Experience</title>
<style>
/* ----------------- Base Styling ----------------- */
body {
  margin: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(to top,#87ceeb,#ffffff);
  overflow-x: hidden;
}

/* ----------------- Signup ----------------- */
#signup {
  position: absolute;
  top: 50px;
  width: 100%;
  text-align: center;
  z-index: 10;
}
input[type="text"] { padding: 12px; font-size: 16px; border-radius: 6px; border: 1px solid #ccc; }
label { display: block; margin: 12px 0; font-size: 14px; }
button { padding: 12px 24px; font-size: 16px; cursor: pointer; border-radius: 6px; border:none; background:#1e90ff; color:white; transition:0.2s; }
button:hover { background:#0b6fcc; }

/* ----------------- Sky Objects ----------------- */
.sky-object {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  color: white;
  cursor: pointer;
  animation: swing 2s infinite alternate;
  border-radius: 50%;
  text-align: center;
  user-select: none;
}

/* Objects */
.balloon { width: 120px; height: 160px; font-size: 18px; border-radius:50% 50% 50% 50% / 55% 55% 45% 45%; }
.star { width: 100px; height: 100px; font-size: 16px; clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%); color:black; }
.kite { width: 80px; height: 80px; font-size: 14px; clip-path: polygon(50% 0%,100% 50%,50% 100%,0% 50%); }

/* Swing animation */
@keyframes swing {0%{transform:rotate(-10deg);}50%{transform:rotate(10deg);}100%{transform:rotate(-10deg);}}
@keyframes floatUp {0%{transform:translateY(0);opacity:1;}100%{transform:translateY(-500px);opacity:0;}}

/* ----------------- Snackbar ----------------- */
#snackbar {
  visibility: hidden;
  min-width: 280px;
  background-color: #333;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: fixed;
  z-index: 20;
  left: 50%;
  bottom: 30px;
  transform: translateX(-50%);
  font-size: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
#snackbar.show {
  visibility: visible;
  animation: fadein 0.5s, fadeout 0.5s 2.5s;
}
@keyframes fadein { from {bottom:0; opacity:0;} to {bottom:30px; opacity:1;} }
@keyframes fadeout { from {bottom:30px; opacity:1;} to {bottom:0; opacity:0;} }

/* ----------------- Clouds ----------------- */
.cloud {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  z-index: 1;
}
</style>
</head>
<body>

<!-- ----------------- Signup Form ----------------- -->
<div id="signup">
  <h2>Join Your Sky</h2>
  <input type="text" id="name" placeholder="Enter your name"><br>
  <label><input type="checkbox" id="consent"> I agree to receive updates</label>
  <button onclick="submitForm()">Join Sky</button>
  <p id="inviteLink"></p>
</div>

<div id="snackbar"></div>

<script>
// ----------------- Configuration -----------------
const colors = ["#ff6b6b","#ff4757","#ffa502","#1e90ff","#2ed573"];
const skyObjects = []; // Stores all objects in the current sky
const clouds = [];

// ----------------- Cloud Animation -----------------
for(let i=0;i<7;i++){createCloud(Math.random()*window.innerWidth,Math.random()*150,100+Math.random()*120);}
function createCloud(x,y,size){
  const cloud = document.createElement("div");
  cloud.className = "cloud";
  cloud.style.width = size+"px"; cloud.style.height = (size/2)+"px";
  cloud.style.left = x+"px"; cloud.style.top = y+"px";
  document.body.appendChild(cloud);
  clouds.push({el:cloud,x,speed:0.2+Math.random()*0.4});
}
function moveClouds(){
  clouds.forEach(c=>{
    c.x += c.speed;
    if(c.x > window.innerWidth) c.x = -200;
    c.el.style.left = c.x+"px";
  });
  requestAnimationFrame(moveClouds);
}
moveClouds();

// ----------------- Snackbar -----------------
function showSnackbar(msg){
  const s = document.getElementById("snackbar");
  s.textContent = msg;
  s.className = "show";
  setTimeout(()=>{s.className = s.className.replace("show","");},3000);
}

// ----------------- Sky ID & Invite -----------------
let skyId = new URL(window.location.href).searchParams.get("sky") || Math.random().toString(36).substring(2,8);

// ----------------- Sky Join -----------------
function joinSky(name,type="balloon"){
  const color = colors[Math.floor(Math.random()*colors.length)];
  const left = Math.random()*(window.innerWidth-150);
  const top = 500;
  const obj = {name,type,color,left,top,skyId};
  skyObjects.push(obj);
  renderSkyObject(obj);
  createConfetti(obj);
  showSnackbar(`${name} joined your sky!`);
  checkRewards();
}

// Render objects
function renderSkyObject(obj){
  const div = document.createElement("div");
  div.className = "sky-object "+obj.type;
  div.style.left = obj.left+"px"; div.style.top = obj.top+"px";
  div.style.background = obj.color; div.textContent = obj.name;
  document.body.appendChild(div);
  setTimeout(()=>{div.style.animation="floatUp 6s linear forwards";},100);
}

// Confetti Animation
function createConfetti(obj){
  for(let i=0;i<25;i++){
    const c = document.createElement("div");
    c.style.position="absolute"; c.style.width="6px"; c.style.height="6px";
    c.style.background = colors[Math.floor(Math.random()*colors.length)];
    c.style.left = parseInt(obj.left)+50+"px";
    c.style.top = parseInt(obj.top)+50+"px";
    c.style.borderRadius = "50%";
    document.body.appendChild(c);
    const angle = Math.random()*2*Math.PI; const dist = 50+Math.random()*50;
    const x = dist*Math.cos(angle); const y = dist*Math.sin(angle);
    c.animate([{transform:`translate(0,0)`,opacity:1},{transform:`translate(${x}px,${y}px)`,opacity:0}],{duration:2000+Math.random()*1000,easing:"ease-out"});
    setTimeout(()=>c.remove(),3000);
  }
}

// ----------------- Reward System -----------------
function checkRewards(){
  const count = skyObjects.length;
  if(count === 3) showSnackbar("üéâ Sky Badge Unlocked! You brought 3 friends!");
  if(count === 5) showSnackbar("üåà Rainbow Trail Unlocked! Sky looks magical!");
  if(count === 7) showSnackbar("üèÖ Master Sky Builder! Invite more for surprises!");
}

// ----------------- Sign-Up Form -----------------
function submitForm(){
  const name = document.getElementById('name').value.trim();
  const consent = document.getElementById('consent').checked;
  if(!name){alert("Please enter your name!"); return;}
  joinSky(name);
  document.getElementById('signup').style.display = 'none';

  // Invite link
  const inviteLink = `${window.location.origin}?sky=${skyId}`;
  document.getElementById("inviteLink").innerHTML=`Share this link to invite friends: <a href="${inviteLink}" target="_blank">${inviteLink}</a>`;
  showSnackbar("Invite friends and grow your sky!");
}

// ----------------- Demo: Simulated Friends Joining -----------------
setTimeout(()=>{joinSky("Alice","star");},2000);
setTimeout(()=>{joinSky("Bob","kite");},4000);
setTimeout(()=>{joinSky("Charlie","balloon");},6000);

</script>
</body>
</html>
